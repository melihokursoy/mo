import{j as n}from"./jsx-runtime-C_AO3mhU.js";import{r as i}from"./iframe-Choes1VT.js";import{c as C}from"./cn-2dOUpm6k.js";import"./preload-helper-PPVm8Dsz.js";function z(e){if(e instanceof Date)return e.getTime();const t=Number(e);if(!Number.isNaN(t))return t;const s=Date.parse(String(e));return Number.isNaN(s)?NaN:s}function j(e){if(e<=0)return{expired:!0,text:"00:00:00"};const t=Math.floor(e/1e3),s=Math.floor(t/86400),d=Math.floor(t%86400/3600),v=Math.floor(t%3600/60),y=t%60,l=p=>String(p).padStart(2,"0"),a=l(d+s*24),m=l(v),c=l(y);return{expired:!1,text:s>0?`${s}d ${a}:${m}:${c}`:`${a}:${m}:${c}`}}const r=i.forwardRef(({deadline:e,onComplete:t,className:s,variant:d="primary",size:v="md",...y},l)=>{const a=i.useMemo(()=>z(e),[e]),m={primary:"bg-primary-600 text-white",secondary:"bg-secondary-600 text-white",outline:"border-2 border-primary-600 text-primary-600 bg-transparent",ghost:"text-gray-700 bg-transparent"},c={sm:"text-sm px-2 py-0.5 rounded",md:"text-base px-3 py-1 rounded",lg:"text-lg px-4 py-1.5 rounded"},[u,p]=i.useState(()=>Date.now()),[N,h]=i.useState(!1);i.useEffect(()=>{if(Number.isNaN(a))return;p(Date.now());const D=setInterval(()=>p(Date.now()),1e3);return()=>clearInterval(D)},[a]),i.useEffect(()=>{Number.isNaN(a)||u>=a&&!N&&(h(!0),t?.())},[u,a,N,t]);const b=j(a-u),S=N?d==="ghost"?"text-red-600 bg-transparent":d==="outline"?"border-2 border-red-600 text-red-600 bg-transparent":"bg-red-600 text-white":m[d];return n.jsx("div",{ref:l,className:C("inline-flex items-center font-mono",S,c[v],s),...y,children:Number.isNaN(a)?"Invalid date":b.text})});r.displayName="Countdown";r.__docgenInfo={description:"",methods:[],displayName:"Countdown",props:{deadline:{required:!0,tsType:{name:"union",raw:"string | number | Date",elements:[{name:"string"},{name:"number"},{name:"Date"}]},description:"deadline as Date | timestamp | ISO string"},onComplete:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"optional callback when countdown reaches zero"},variant:{required:!1,tsType:{name:"union",raw:"'primary' | 'secondary' | 'outline' | 'ghost'",elements:[{name:"literal",value:"'primary'"},{name:"literal",value:"'secondary'"},{name:"literal",value:"'outline'"},{name:"literal",value:"'ghost'"}]},description:"visual variant to match Button",defaultValue:{value:"'primary'",computed:!1}},size:{required:!1,tsType:{name:"union",raw:"'sm' | 'md' | 'lg'",elements:[{name:"literal",value:"'sm'"},{name:"literal",value:"'md'"},{name:"literal",value:"'lg'"}]},description:"size to align with Button sizes",defaultValue:{value:"'md'",computed:!1}}}};const O={title:"Components/Countdown",component:r,tags:["autodocs"]},o=new Date(Date.now()+360*60*1e3).toISOString(),E=new Date(Date.now()-6e4).toISOString(),g={args:{deadline:o}},x={args:{deadline:E}},f={render:()=>n.jsxs("div",{className:"flex gap-3",children:[n.jsx(r,{deadline:o,variant:"primary"}),n.jsx(r,{deadline:o,variant:"secondary"}),n.jsx(r,{deadline:o,variant:"outline"}),n.jsx(r,{deadline:o,variant:"ghost"})]})},w={render:()=>n.jsxs("div",{className:"flex gap-3 items-center",children:[n.jsx(r,{deadline:o,size:"sm"}),n.jsx(r,{deadline:o,size:"md"}),n.jsx(r,{deadline:o,size:"lg"})]})};g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:`{
  args: {
    deadline: deadline
  }
}`,...g.parameters?.docs?.source}}};x.parameters={...x.parameters,docs:{...x.parameters?.docs,source:{originalSource:`{
  args: {
    deadline: expiredDeadline
  }
}`,...x.parameters?.docs?.source}}};f.parameters={...f.parameters,docs:{...f.parameters?.docs,source:{originalSource:`{
  render: () => <div className="flex gap-3">
      <Countdown deadline={deadline} variant="primary" />
      <Countdown deadline={deadline} variant="secondary" />
      <Countdown deadline={deadline} variant="outline" />
      <Countdown deadline={deadline} variant="ghost" />
    </div>
}`,...f.parameters?.docs?.source}}};w.parameters={...w.parameters,docs:{...w.parameters?.docs,source:{originalSource:`{
  render: () => <div className="flex gap-3 items-center">
      <Countdown deadline={deadline} size="sm" />
      <Countdown deadline={deadline} size="md" />
      <Countdown deadline={deadline} size="lg" />
    </div>
}`,...w.parameters?.docs?.source}}};const V=["Default","Expired","Variants","Sizes"];export{g as Default,x as Expired,w as Sizes,f as Variants,V as __namedExportsOrder,O as default};
